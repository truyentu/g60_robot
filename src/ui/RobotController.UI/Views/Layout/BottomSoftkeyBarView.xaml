<UserControl x:Class="RobotController.UI.Views.Layout.BottomSoftkeyBarView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="52" d:DesignWidth="1024"
             SnapsToDevicePixels="True"
             UseLayoutRounding="True">

    <!-- ================================================================ -->
    <!-- KUKA SmartHMI Softkey Bar (Bottom Membrane Strip)                -->
    <!--                                                                  -->
    <!-- Reference: KUKA smartPAD softkeys — context-sensitive buttons    -->
    <!-- Layout: 7 equal-width buttons, NO gaps, NO corner radius         -->
    <!-- Context: Navigator mode = New/Select/Duplicate/Archive/          -->
    <!--          Delete/Open/Edit                                        -->
    <!-- Default: Connect/Disconnect/Refresh/Home/Run/Stop/(empty)        -->
    <!--                                                                  -->
    <!-- Height: 72px (fat-finger friendly for industrial use)            -->
    <!-- Borders: top+right only (#111111) to create cell separators      -->
    <!-- Press state: KUKA Orange highlight                               -->
    <!-- ================================================================ -->

    <Border Background="#C0C0C0" BorderBrush="#999999" BorderThickness="0,1,0,0">
        <Grid Margin="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0"
                    Content="{Binding Softkey1Text, FallbackValue='Connect'}"
                    Command="{Binding Softkey1Command}"
                    Style="{StaticResource SoftkeyButton}"/>
            <Button Grid.Column="1"
                    Content="{Binding Softkey2Text, FallbackValue='Disconnect'}"
                    Command="{Binding Softkey2Command}"
                    Style="{StaticResource SoftkeyButton}"/>
            <Button Grid.Column="2"
                    Content="{Binding Softkey3Text, FallbackValue='Refresh'}"
                    Command="{Binding Softkey3Command}"
                    Style="{StaticResource SoftkeyButton}"/>
            <Button Grid.Column="3"
                    Content="{Binding Softkey4Text, FallbackValue='Home'}"
                    Command="{Binding Softkey4Command}"
                    Style="{StaticResource SoftkeyButton}"/>
            <Button Grid.Column="4"
                    Content="{Binding Softkey5Text, FallbackValue='Run'}"
                    Command="{Binding Softkey5Command}"
                    Style="{StaticResource SoftkeyButton}"/>
            <Button Grid.Column="5"
                    Content="{Binding Softkey6Text, FallbackValue='Stop'}"
                    Command="{Binding Softkey6Command}"
                    Style="{StaticResource SoftkeyButton}"/>

            <!-- Softkey 7: Edit (Navigator mode) — ToggleButton + Popup -->
            <ToggleButton x:Name="EditMenuToggle" Grid.Column="6"
                          Content="{Binding Softkey7Text, FallbackValue=''}"
                          Visibility="{Binding Softkey7Visible, FallbackValue=Collapsed}"
                          Style="{StaticResource SoftkeyToggleButton}"/>

            <!-- Edit submenu popup (Cut/Copy/Paste/Rename/Filter) -->
            <Popup x:Name="EditMenuPopup"
                   PlacementTarget="{Binding ElementName=EditMenuToggle}"
                   Placement="Top"
                   StaysOpen="False"
                   AllowsTransparency="True"
                   IsOpen="{Binding IsChecked, ElementName=EditMenuToggle, Mode=TwoWay}">
                <Border Background="#C8C8C8" BorderBrush="#999999" BorderThickness="1"
                        MinWidth="180" Margin="4,4,4,0">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="12" Opacity="0.5" ShadowDepth="-2"/>
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock Text="Edit" Foreground="#888888" FontSize="10"
                                   Margin="12,8,12,4" FontFamily="Segoe UI"/>
                        <Rectangle Height="1" Fill="#999999" Margin="0,2"/>

                        <Button Tag="Cut" Click="EditMenuItem_Click"
                                Style="{StaticResource MainMenuItemStyle}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="&#x2702;" FontSize="14" Foreground="#FFAA00"
                                           VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Cut" FontSize="13"
                                           Foreground="#333333" VerticalAlignment="Center"
                                           FontFamily="Segoe UI"/>
                            </Grid>
                        </Button>
                        <Button Tag="Copy" Click="EditMenuItem_Click"
                                Style="{StaticResource MainMenuItemStyle}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="&#x2398;" FontSize="14" Foreground="#4EC9B0"
                                           VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Copy" FontSize="13"
                                           Foreground="#333333" VerticalAlignment="Center"
                                           FontFamily="Segoe UI"/>
                            </Grid>
                        </Button>
                        <Button Tag="Paste" Click="EditMenuItem_Click"
                                Style="{StaticResource MainMenuItemStyle}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="&#x2399;" FontSize="14" Foreground="#7EAEF1"
                                           VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Paste" FontSize="13"
                                           Foreground="#333333" VerticalAlignment="Center"
                                           FontFamily="Segoe UI"/>
                            </Grid>
                        </Button>

                        <Rectangle Height="1" Fill="#999999" Margin="8,2"/>

                        <Button Tag="Rename" Click="EditMenuItem_Click"
                                Style="{StaticResource MainMenuItemStyle}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="&#x270E;" FontSize="14" Foreground="#C586C0"
                                           VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Rename" FontSize="13"
                                           Foreground="#333333" VerticalAlignment="Center"
                                           FontFamily="Segoe UI"/>
                            </Grid>
                        </Button>
                        <Button Tag="Filter" Click="EditMenuItem_Click"
                                Style="{StaticResource MainMenuItemStyle}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="&#x2637;" FontSize="14" Foreground="#555555"
                                           VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Filter" FontSize="13"
                                           Foreground="#333333" VerticalAlignment="Center"
                                           FontFamily="Segoe UI"/>
                            </Grid>
                        </Button>
                    </StackPanel>
                </Border>
            </Popup>
        </Grid>
    </Border>
</UserControl>
