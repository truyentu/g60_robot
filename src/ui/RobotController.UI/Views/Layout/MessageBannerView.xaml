<UserControl x:Class="RobotController.UI.Views.Layout.MessageBannerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="40" d:DesignWidth="1400"
             SnapsToDevicePixels="True"
             UseLayoutRounding="True">

    <!-- ================================================================ -->
    <!-- KUKA SmartHMI Message Window (Alarm/Notification Banner)         -->
    <!--                                                                  -->
    <!-- Reference: Directly below status bar on KUKA smartPAD            -->
    <!-- Shows: Warning icon | Timestamp | Message text | OK | Confirm All-->
    <!--                                                                  -->
    <!-- Background: Dark red (#4A0000) for active alarms                 -->
    <!--             Dark grey (#2D2D2D) when idle                        -->
    <!-- ================================================================ -->

    <Border BorderBrush="#2A2A2A" BorderThickness="0,0,0,1">
        <Border.Background>
            <SolidColorBrush Color="{StaticResource AlarmRed}"/>
        </Border.Background>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>   <!-- Left accent stripe -->
                <ColumnDefinition Width="Auto"/>   <!-- Warning icon -->
                <ColumnDefinition Width="Auto"/>   <!-- Timestamp -->
                <ColumnDefinition Width="*"/>      <!-- Message text -->
                <ColumnDefinition Width="Auto"/>   <!-- Message count -->
                <ColumnDefinition Width="Auto"/>   <!-- OK button -->
                <ColumnDefinition Width="Auto"/>   <!-- Confirm All button -->
            </Grid.ColumnDefinitions>

            <!-- Left accent stripe (red for alarm) -->
            <Border Grid.Column="0" Width="5" Background="#CC2222"/>

            <!-- Warning icon -->
            <TextBlock Grid.Column="1" Text="&#x26A0;" FontSize="16"
                       Foreground="#FF6B6B" VerticalAlignment="Center"
                       Margin="10,0,6,0"/>

            <!-- Timestamp -->
            <TextBlock Grid.Column="2"
                       Text="{Binding MessageTimestamp, FallbackValue=''}"
                       Foreground="#886666" FontSize="10" FontFamily="Consolas"
                       VerticalAlignment="Center" Margin="0,0,8,0"
                       MinWidth="60"/>

            <!-- Message text -->
            <TextBlock Grid.Column="3"
                       Text="{Binding CurrentMessage, FallbackValue='No active messages'}"
                       Foreground="#DDAAAA" FontSize="13" FontFamily="Segoe UI"
                       VerticalAlignment="Center" TextTrimming="CharacterEllipsis"
                       Margin="4,0"/>

            <!-- Message count badge -->
            <Border Grid.Column="4" Background="#661111" Padding="8,2" Margin="4,8"
                    VerticalAlignment="Center">
                <TextBlock Text="1" Foreground="#FF8888" FontSize="11"
                           FontWeight="Bold" FontFamily="Consolas"
                           HorizontalAlignment="Center"/>
            </Border>

            <!-- OK (Acknowledge single) -->
            <Button Grid.Column="5"
                    Command="{Binding AcknowledgeMessageCommand}"
                    Style="{StaticResource AckButton}"
                    Content="OK" Padding="14,0" Margin="2,0"/>

            <!-- Confirm All -->
            <Button Grid.Column="6"
                    Command="{Binding AcknowledgeMessageCommand}"
                    Padding="14,0" Margin="0">
                <Button.Style>
                    <Style TargetType="Button" BasedOn="{StaticResource AckButton}">
                        <Setter Property="Background" Value="#552222"/>
                    </Style>
                </Button.Style>
                <TextBlock Text="Confirm All" FontSize="11" Foreground="#FF8888"/>
            </Button>
        </Grid>
    </Border>
</UserControl>
